{"version":3,"sources":["Image.js","services/http.service.js","Dashboard.js","Token.js","App.js","reportWebVitals.js","index.js"],"names":["Image","list","useState","current","setCurrent","useEffect","length","url","onClick","e","preventDefault","className","src","map","it","index","bind","http","axios","create","baseURL","transformRequest","data","header","token","window","localStorage","getItem","Array","isArray","defaults","Dashboard","setData","dups","setDups","likes","setLikes","passes","setPasses","loading","useRef","ids","removerLikes","removerDislikes","load","addEventListener","onScroll","removeEventListener","elm","document","scrollingElement","scrollTop","scrollHeight","innerHeight","a","get","then","res","filtered","filter","result","indexOf","user","_id","push","p","removeItem","location","reload","negateAll","currentData","rem","post","id","s","s_number","like","item","checked","dislike","likeButton","isLike","isDislike","clsx","disabled","hidden","passButton","type","name","ref","for","photos","d","birth_date","moment","format","distance_mi","toFixed","replace","bio","Token","setToken","placeholder","onChange","target","value","setItem","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.07af2f47.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\n\nconst Image = ({ list }) => {\n\tconst [current, setCurrent] = useState('');\n\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (list.length) {\n\t\t\t\tsetCurrent(list[0].url);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[]\n\t);\n\n\tconst onClick = (url, e) => {\n\t\te.preventDefault();\n\t\tsetCurrent(url);\n\t};\n\n\treturn (\n\t\t<div className=\"img-block\">\n\t\t\t<img src={current} />\n\t\t\t<div className=\"thumbs\">\n\t\t\t\t{list.map((it, index) => (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={it.url}\n\t\t\t\t\t\tclassName={it.url === current ? 'active' : ''}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tonClick={onClick.bind(null, it.url)}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Image;\n","import axios from 'axios';\n\nconst getDefaultTransformers = () =>\n\tArray.isArray(axios.defaults.transformRequest) ? axios.defaults.transformRequest : [axios.defaults.transformRequest];\n\nconst http = axios.create({\n\tbaseURL: 'http://cast.celiorodrigues.com:6380',\n\ttransformRequest: [\n\t\t(data, header) => {\n\t\t\tconst token = window.localStorage.getItem('tinderToken');\n\t\t\tif (token) {\n\t\t\t\theader['tinder-token'] = token;\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\t...getDefaultTransformers(),\n\t]\n});\n\nexport default http;\n","import React, { useEffect, useRef, useState } from 'react';\nimport moment from 'moment';\nimport Image from './Image';\nimport http from './services/http.service';\nimport clsx from 'clsx';\n\nimport './Dashboard.css';\n\nconst Dashboard = () => {\n\tconst [data, setData] = useState([]);\n\tconst [dups, setDups] = useState(0);\n\n\tconst [likes, setLikes] = useState([]);\n\tconst [passes, setPasses] = useState([]);\n\n\tconst loading = useRef(false);\n\tconst ids = useRef([]);\n\tconst removerLikes = useRef();\n\tconst removerDislikes = useRef();\n\n\tuseEffect(\n\t\t() => {\n\t\t\tload();\n\t\t\twindow.addEventListener('scroll', onScroll, false);\n\t\t\treturn () => window.removeEventListener('scroll', onScroll);\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tloading.current = false;\n\t\t},\n\t\t[data]\n\t);\n\n\tconst onScroll = e => {\n\t\tconst elm = document.scrollingElement;\n\t\tif (!loading.current && elm.scrollTop > (elm.scrollHeight - window.innerHeight - 250)) {\n\t\t\tload();\n\t\t}\n\t};\n\n\tconst getDate = d => moment(d).format('YYYY');\n\n\tconst load = async () => {\n\t\tloading.current = true;\n\t\ttry {\n\t\t\tconst res = await http.get('/').then(res => res.data);\n\t\t\tconst filtered = res.length ? res.filter(it => {\n\t\t\t\tconst result = ids.current.indexOf(it.user._id) === -1;\n\t\t\t\tif (result) {\n\t\t\t\t\tids.current.push(it.user._id);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}) : [];\n\n\t\t\tsetDups(p => p + (res.length - filtered.length));\n\n\t\t\tif (filtered.length) {\n\t\t\t\tsetData(p => [...p, ...filtered]);\n\t\t\t} else {\n\t\t\t\tload();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\twindow.localStorage.removeItem('tinderToken');\n\t\t\twindow.location.reload();\n\t\t}\n\t};\n\n\tconst negateAll = async e => {\n\t\te.preventDefault();\n\t\tconst currentData = [...data];\n\n\t\tconst rem = async index => {\n\t\t\tsetData(p => p.filter(it => it.user._id !== currentData[index].user._id));\n\t\t\tif (likes.indexOf(currentData[index].user._id) === -1) {\n\t\t\t\tawait http.post('/pass', {\n\t\t\t\t\tid: currentData[index].user._id,\n\t\t\t\t\ts: currentData[index].s_number,\n\t\t\t\t}).then(res => res.data);\n\t\t\t\tif (index < currentData.length - 1) {\n\t\t\t\t\trem(index + 1);\n\t\t\t\t} else {\n\t\t\t\t\tload();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (currentData.length) {\n\t\t\trem(0);\n\t\t}\n\t};\n\n\tconst like = async (item, e) => {\n\t\te.preventDefault();\n\t\tawait http.post('/like', {\n\t\t\tid: item.user._id,\n\t\t\ts: item.s_number,\n\t\t}).then(res => res.data);\n\t\tsetLikes(p => [...p, item.user._id]);\n\t\tif (removerLikes.current.checked) {\n\t\t\tsetData(p => p.filter(it => it.user._id !== item.user._id));\n\t\t}\n\t};\n\n\tconst dislike = async (item, e) => {\n\t\te.preventDefault();\n\t\tawait http.post('/pass', {\n\t\t\tid: item.user._id,\n\t\t\ts: item.s_number,\n\t\t}).then(res => res.data);\n\t\tsetPasses(p => [...p, item.user._id]);\n\t\tif (removerDislikes.current.checked) {\n\t\t\tsetData(p => p.filter(it => it.user._id !== item.user._id));\n\t\t}\n\t};\n\n\tconst likeButton = (item) => {\n\t\tconst isLike = likes.indexOf(item.user._id) !== -1;\n\t\tconst isDislike = passes.indexOf(item.user._id) !== -1;\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={clsx(\"like\", {\n\t\t\t\t\tdisabled: isLike,\n\t\t\t\t\thidden: isDislike\n\t\t\t\t})}\n\t\t\t\tonClick={like.bind(null, item)}\n\t\t\t\tdisabled={isLike}\n\t\t\t>\n\t\t\t\t{isLike ? 'Liked' : 'Like'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst passButton = (item) => {\n\t\tconst isLike = likes.indexOf(item.user._id) !== -1;\n\t\tconst isDislike = passes.indexOf(item.user._id) !== -1;\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={clsx(\"dislike\", {\n\t\t\t\t\tdisabled: isDislike,\n\t\t\t\t\thidden: isLike\n\t\t\t\t})}\n\t\t\t\tonClick={dislike.bind(null, item)}\n\t\t\t\tdisabled={isDislike}\n\t\t\t>\n\t\t\t\t{isDislike ? 'Disliked' : 'Dislike'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div className=\"dashboard\">\n\t\t\t<header>\n\t\t\t\t<button onClick={negateAll} className=\"negate-all\">Negar Todos</button>\n\t\t\t\t<div className=\"removerLikes\">\n\t\t\t\t\t<input type=\"checkbox\" name=\"remover-likes\" id=\"remover-likes\" ref={removerLikes} />\n\t\t\t\t\t<label for=\"remover-likes\">Remover após o like</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"removerDislikes\">\n\t\t\t\t\t<input type=\"checkbox\" name=\"remover-dislikes\" id=\"remover-dislikes\" ref={removerDislikes} />\n\t\t\t\t\t<label for=\"remover-dislikes\">Remover após o dislike</label>\n\t\t\t\t</div>\n\t\t\t\t<span className=\"counter\">{data.length}/{dups}</span>\n\t\t\t</header>\n\t\t\t<div className=\"list\">\n\t\t\t\t{data.map(it => (\n\t\t\t\t\t<div key={it.user._id} className=\"item\" data-id={it.user._id}>\n\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t<Image list={it.user.photos} />\n\t\t\t\t\t\t\t<div className=\"info\">\n\t\t\t\t\t\t\t\t<h1>{it.user.name}</h1>\n\t\t\t\t\t\t\t\t<h3>{getDate(it.user.birth_date)}</h3>\n\t\t\t\t\t\t\t\t<span className=\"distance\">{(it.distance_mi * 1.609).toFixed(1).replace('.', ',')} km</span>\n\t\t\t\t\t\t\t\t<p>{it.user.bio}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"actions\">\n\t\t\t\t\t\t\t\t{passButton(it)}\n\t\t\t\t\t\t\t\t{likeButton(it)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Dashboard;\n","import React, { useState } from 'react';\n\nimport './Token.css';\n\nconst Token = () => {\n\tconst [token, setToken] = useState('');\t\n\t\n\tconst onChange = e => setToken(e.target.value);\n\n\tconst onClick = e => {\n\t\te.preventDefault();\n\t\tif (token) {\n\t\t\twindow.localStorage.setItem('tinderToken', token);\n\t\t\twindow.location.reload();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"token-page\">\n\t\t\t<input type=\"text\" name=\"token\" placeholder=\"Token\" onChange={onChange} />\n\t\t\t<button onClick={onClick}>Entrar</button>\n\t\t</div>\n\t);\n};\n\nexport default Token;\n","import React from 'react';\nimport Dashboard from './Dashboard';\nimport Token from './Token';\n\nimport './App.css';\n\nconst App = () => {\n\tconst token = window.localStorage.getItem('tinderToken');\n\treturn !!token ? <Dashboard /> : <Token />;\n};\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
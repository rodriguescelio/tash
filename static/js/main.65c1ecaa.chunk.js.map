{"version":3,"sources":["Image.js","services/http.service.js","Dashboard.js","Token.js","App.js","reportWebVitals.js","index.js"],"names":["Image","list","useState","current","setCurrent","useEffect","length","url","onClick","e","preventDefault","className","src","map","it","index","bind","http","axios","create","baseURL","transformRequest","data","header","token","window","localStorage","getItem","Array","isArray","defaults","Dashboard","setData","dups","setDups","likes","setLikes","passes","setPasses","loading","useRef","ids","load","addEventListener","onScroll","removeEventListener","elm","document","scrollingElement","scrollTop","scrollHeight","innerHeight","a","get","then","res","filtered","filter","result","indexOf","user","_id","push","p","removeItem","location","reload","negateAll","currentData","rem","post","id","s","s_number","console","log","status","like","item","dislike","likeButton","isLike","isDislike","clsx","disabled","hidden","passButton","photos","name","d","birth_date","moment","format","distance_mi","toFixed","replace","bio","Token","setToken","type","placeholder","onChange","target","value","setItem","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"sSAsCeA,EApCD,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAChB,EAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAGAC,qBACC,WACKJ,EAAKK,QACRF,EAAWH,EAAK,GAAGM,OAIrB,IAGD,IAAMC,EAAU,SAACD,EAAKE,GACrBA,EAAEC,iBACFN,EAAWG,IAGZ,OACC,sBAAKI,UAAU,YAAf,UACC,qBAAKC,IAAKT,IACV,qBAAKQ,UAAU,SAAf,SACEV,EAAKY,KAAI,SAACC,EAAIC,GAAL,OACT,qBACCH,IAAKE,EAAGP,IACRI,UAAWG,EAAGP,MAAQJ,EAAU,SAAW,GAE3CK,QAASA,EAAQQ,KAAK,KAAMF,EAAGP,MAD1BQ,YCVIE,EAdFC,IAAMC,OAAO,CACzBC,QAAS,sCACTC,iBAAiB,CAChB,SAACC,EAAMC,GACN,IAAMC,EAAQC,OAAOC,aAAaC,QAAQ,eAI1C,OAHIH,IACHD,EAAO,gBAAkBC,GAEnBF,IANO,mBAJhBM,MAAMC,QAAQX,IAAMY,SAAST,kBAAoBH,IAAMY,SAAST,iBAAmB,CAACH,IAAMY,SAAST,sB,gBCwKrFU,EAlKG,WACjB,MAAwB7B,mBAAS,IAAjC,mBAAOoB,EAAP,KAAaU,EAAb,KACA,EAAwB9B,mBAAS,GAAjC,mBAAO+B,EAAP,KAAaC,EAAb,KAEA,EAA0BhC,mBAAS,IAAnC,mBAAOiC,EAAP,KAAcC,EAAd,KACA,EAA4BlC,mBAAS,IAArC,mBAAOmC,EAAP,KAAeC,EAAf,KAEMC,EAAUC,kBAAO,GACjBC,EAAMD,iBAAO,IAEnBnC,qBACC,WAGC,OAFAqC,IACAjB,OAAOkB,iBAAiB,SAAUC,GAAU,GACrC,kBAAMnB,OAAOoB,oBAAoB,SAAUD,MAGnD,IAGDvC,qBACC,WACCkC,EAAQpC,SAAU,IAEnB,CAACmB,IAGF,IAAMsB,EAAW,SAAAnC,GAChB,IAAMqC,EAAMC,SAASC,kBAChBT,EAAQpC,SAAW2C,EAAIG,UAAaH,EAAII,aAAezB,OAAO0B,YAAc,KAChFT,KAMIA,EAAI,uCAAG,8BAAAU,EAAA,6DACZb,EAAQpC,SAAU,EADN,kBAGOc,EAAKoC,IAAI,KAAKC,MAAK,SAAAC,GAAG,OAAIA,EAAIjC,QAHrC,OAGLiC,EAHK,OAILC,EAAWD,EAAIjD,OAASiD,EAAIE,QAAO,SAAA3C,GACxC,IAAM4C,GAA+C,IAAtCjB,EAAItC,QAAQwD,QAAQ7C,EAAG8C,KAAKC,KAI3C,OAHIH,GACHjB,EAAItC,QAAQ2D,KAAKhD,EAAG8C,KAAKC,KAEnBH,KACH,GAELxB,GAAQ,SAAA6B,GAAC,OAAIA,GAAKR,EAAIjD,OAASkD,EAASlD,WACxC0B,GAAQ,SAAA+B,GAAC,4BAAQA,GAAR,YAAcP,OAbZ,kDAeX/B,OAAOC,aAAasC,WAAW,eAC/BvC,OAAOwC,SAASC,SAhBL,0DAAH,qDAoBJC,EAAS,uCAAG,WAAM1D,GAAN,iBAAA2C,EAAA,sDACjB3C,EAAEC,iBACI0D,EAFW,YAEO9C,GAElB+C,EAJW,+BAAAjB,EAAA,MAIL,WAAMrC,GAAN,eAAAqC,EAAA,sEACOnC,EAAKqD,KAAK,QAAS,CACpCC,GAAIH,EAAYrD,GAAO6C,KAAKC,IAC5BW,EAAGJ,EAAYrD,GAAO0D,WACpBnB,MAAK,SAAAC,GAAG,OAAIA,EAAIjC,QAJR,OACLiC,EADK,OAKXmB,QAAQC,IAAIpB,GACO,MAAfA,EAAIqB,QACP5C,GAAQ,SAAA+B,GAAC,OAAIA,EAAEN,QAAO,SAAA3C,GAAE,OAAIA,EAAG8C,KAAKC,MAAQO,EAAYrD,GAAO6C,KAAKC,UAEjE9C,EAAQqD,EAAY9D,OAAS,EAChC+D,EAAItD,EAAQ,GAEZ2B,IAZU,2CAJK,sDAoBb0B,EAAY9D,QACf+D,EAAI,GArBY,2CAAH,sDAyBTQ,EAAI,uCAAG,WAAOC,EAAMrE,GAAb,SAAA2C,EAAA,6DACZ3C,EAAEC,iBADU,SAEMO,EAAKqD,KAAK,QAAS,CACpCC,GAAIO,EAAKlB,KAAKC,IACdW,EAAGM,EAAKL,WACNnB,MAAK,SAAAC,GAAG,OAAIA,EAAIjC,QALP,cAMZc,GAAS,SAAA2B,GAAC,4BAAQA,GAAR,CAAWe,EAAKlB,KAAKC,SANnB,2CAAH,wDASJkB,EAAO,uCAAG,WAAOD,EAAMrE,GAAb,SAAA2C,EAAA,6DACf3C,EAAEC,iBADa,SAEGO,EAAKqD,KAAK,QAAS,CACpCC,GAAIO,EAAKlB,KAAKC,IACdW,EAAGM,EAAKL,WACNnB,MAAK,SAAAC,GAAG,OAAIA,EAAIjC,QALJ,cAMfgB,GAAU,SAAAyB,GAAC,4BAAQA,GAAR,CAAWe,EAAKlB,KAAKC,SANjB,2CAAH,wDASPmB,EAAa,SAACF,GACnB,IAAMG,GAA2C,IAAlC9C,EAAMwB,QAAQmB,EAAKlB,KAAKC,KACjCqB,GAA+C,IAAnC7C,EAAOsB,QAAQmB,EAAKlB,KAAKC,KAE3C,OACC,wBACClD,UAAWwE,YAAK,OAAQ,CACvBC,SAAUH,EACVI,OAAQH,IAET1E,QAASqE,EAAK7D,KAAK,KAAM8D,GACzBM,SAAUH,EANX,SAQEA,EAAS,QAAU,UAKjBK,EAAa,SAACR,GACnB,IAAMG,GAA2C,IAAlC9C,EAAMwB,QAAQmB,EAAKlB,KAAKC,KACjCqB,GAA+C,IAAnC7C,EAAOsB,QAAQmB,EAAKlB,KAAKC,KAE3C,OACC,wBACClD,UAAWwE,YAAK,UAAW,CAC1BC,SAAUF,EACVG,OAAQJ,IAETzE,QAASuE,EAAQ/D,KAAK,KAAM8D,GAC5BM,SAAUF,EANX,SAQEA,EAAY,WAAa,aAK7B,OACC,sBAAKvE,UAAU,YAAf,UACC,wBAAQH,QAAS2D,EAAWxD,UAAU,aAAtC,yBACA,uBAAMA,UAAU,UAAhB,UAA2BW,EAAKhB,OAAhC,IAAyC2B,KACzC,qBAAKtB,UAAU,OAAf,SACEW,EAAKT,KAAI,SAACC,EAAIC,GAAL,OACT,qBAAuBJ,UAAU,OAAO,UAASG,EAAG8C,KAAKC,IAAzD,SACC,sBAAKlD,UAAU,UAAf,UACC,cAAC,EAAD,CAAOV,KAAMa,EAAG8C,KAAK2B,SACrB,sBAAK5E,UAAU,OAAf,UACC,6BAAKG,EAAG8C,KAAK4B,OACb,8BAhHSC,EAgHI3E,EAAG8C,KAAK8B,WAhHPC,IAAOF,GAAGG,OAAO,WAiH/B,uBAAMjF,UAAU,WAAhB,WAA8C,MAAjBG,EAAG+E,aAAqBC,QAAQ,GAAGC,QAAQ,IAAK,KAA7E,SACA,4BAAIjF,EAAG8C,KAAKoC,SAEb,sBAAKrF,UAAU,UAAf,UACE2E,EAAWxE,GACXkE,EAAWlE,UAXLA,EAAG8C,KAAKC,KA3GN,IAAA4B,WClBFQ,G,MArBD,WACb,MAA0B/F,mBAAS,IAAnC,mBAAOsB,EAAP,KAAc0E,EAAd,KAYA,OACC,sBAAKvF,UAAU,aAAf,UACC,uBAAOwF,KAAK,OAAOX,KAAK,QAAQY,YAAY,QAAQC,SAZrC,SAAA5F,GAAC,OAAIyF,EAASzF,EAAE6F,OAAOC,UAatC,wBAAQ/F,QAXM,SAAAC,GACfA,EAAEC,iBACEc,IACHC,OAAOC,aAAa8E,QAAQ,cAAehF,GAC3CC,OAAOwC,SAASC,WAOhB,yBCTYuC,G,MALH,WAEX,OADchF,OAAOC,aAAaC,QAAQ,eACzB,cAAC,EAAD,IAAgB,cAAC,EAAD,MCInB+E,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBtD,MAAK,YAAkD,IAA/CuD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCFdO,IAASC,OAAO,cAAC,EAAD,IAASpE,SAASqE,eAAe,SAKjDV,M","file":"static/js/main.65c1ecaa.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\n\nconst Image = ({ list }) => {\n\tconst [current, setCurrent] = useState('');\n\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (list.length) {\n\t\t\t\tsetCurrent(list[0].url);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[]\n\t);\n\n\tconst onClick = (url, e) => {\n\t\te.preventDefault();\n\t\tsetCurrent(url);\n\t};\n\n\treturn (\n\t\t<div className=\"img-block\">\n\t\t\t<img src={current} />\n\t\t\t<div className=\"thumbs\">\n\t\t\t\t{list.map((it, index) => (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={it.url}\n\t\t\t\t\t\tclassName={it.url === current ? 'active' : ''}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tonClick={onClick.bind(null, it.url)}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Image;\n","import axios from 'axios';\n\nconst getDefaultTransformers = () =>\n\tArray.isArray(axios.defaults.transformRequest) ? axios.defaults.transformRequest : [axios.defaults.transformRequest];\n\nconst http = axios.create({\n\tbaseURL: 'http://cast.celiorodrigues.com:6380',\n\ttransformRequest: [\n\t\t(data, header) => {\n\t\t\tconst token = window.localStorage.getItem('tinderToken');\n\t\t\tif (token) {\n\t\t\t\theader['tinder-token'] = token;\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\t...getDefaultTransformers(),\n\t]\n});\n\nexport default http;\n","import React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Image from './Image';\nimport http from './services/http.service';\n\nimport './Dashboard.css';\nimport clsx from 'clsx';\n\nconst Dashboard = () => {\n\tconst [data, setData] = useState([]);\n\tconst [dups, setDups] = useState(0);\n\n\tconst [likes, setLikes] = useState([]);\n\tconst [passes, setPasses] = useState([]);\n\n\tconst loading = useRef(false);\n\tconst ids = useRef([]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tload();\n\t\t\twindow.addEventListener('scroll', onScroll, false);\n\t\t\treturn () => window.removeEventListener('scroll', onScroll);\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tloading.current = false;\n\t\t},\n\t\t[data]\n\t);\n\n\tconst onScroll = e => {\n\t\tconst elm = document.scrollingElement;\n\t\tif (!loading.current && elm.scrollTop > (elm.scrollHeight - window.innerHeight - 250)) {\n\t\t\tload();\n\t\t}\n\t};\n\n\tconst getDate = d => moment(d).format('YYYY');\n\n\tconst load = async () => {\n\t\tloading.current = true;\n\t\ttry {\n\t\t\tconst res = await http.get('/').then(res => res.data);\n\t\t\tconst filtered = res.length ? res.filter(it => {\n\t\t\t\tconst result = ids.current.indexOf(it.user._id) === -1;\n\t\t\t\tif (result) {\n\t\t\t\t\tids.current.push(it.user._id);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}) : [];\n\n\t\t\tsetDups(p => p + (res.length - filtered.length));\n\t\t\tsetData(p => [...p, ...filtered]);\n\t\t} catch (e) {\n\t\t\twindow.localStorage.removeItem('tinderToken');\n\t\t\twindow.location.reload();\n\t\t}\n\t};\n\n\tconst negateAll = async e => {\n\t\te.preventDefault();\n\t\tconst currentData = [...data];\n\t\t\n\t\tconst rem = async index => {\n\t\t\tconst res = await http.post('/pass', {\n\t\t\t\tid: currentData[index].user._id,\n\t\t\t\ts: currentData[index].s_number,\n\t\t\t}).then(res => res.data);\n\t\t\tconsole.log(res);\n\t\t\tif (res.status === 200) {\n\t\t\t\tsetData(p => p.filter(it => it.user._id !== currentData[index].user._id));\n\t\t\t}\n\t\t\tif (index < currentData.length - 1) {\n\t\t\t\trem(index + 1);\n\t\t\t} else {\n\t\t\t\tload();\n\t\t\t}\n\t\t};\n\n\t\tif (currentData.length) {\n\t\t\trem(0);\n\t\t}\n\t};\n\n\tconst like = async (item, e) => {\n\t\te.preventDefault();\n\t\tconst res = await http.post('/like', {\n\t\t\tid: item.user._id,\n\t\t\ts: item.s_number,\n\t\t}).then(res => res.data);\n\t\tsetLikes(p => [...p, item.user._id]);\n\t};\n\n\tconst dislike = async (item, e) => {\n\t\te.preventDefault();\n\t\tconst res = await http.post('/pass', {\n\t\t\tid: item.user._id,\n\t\t\ts: item.s_number,\n\t\t}).then(res => res.data);\n\t\tsetPasses(p => [...p, item.user._id]);\n\t};\n\n\tconst likeButton = (item) => {\n\t\tconst isLike = likes.indexOf(item.user._id) !== -1;\n\t\tconst isDislike = passes.indexOf(item.user._id) !== -1;\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={clsx(\"like\", {\n\t\t\t\t\tdisabled: isLike,\n\t\t\t\t\thidden: isDislike\n\t\t\t\t})}\n\t\t\t\tonClick={like.bind(null, item)}\n\t\t\t\tdisabled={isLike}\n\t\t\t>\n\t\t\t\t{isLike ? 'Liked' : 'Like'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst passButton = (item) => {\n\t\tconst isLike = likes.indexOf(item.user._id) !== -1;\n\t\tconst isDislike = passes.indexOf(item.user._id) !== -1;\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={clsx(\"dislike\", {\n\t\t\t\t\tdisabled: isDislike,\n\t\t\t\t\thidden: isLike\n\t\t\t\t})}\n\t\t\t\tonClick={dislike.bind(null, item)}\n\t\t\t\tdisabled={isDislike}\n\t\t\t>\n\t\t\t\t{isDislike ? 'Disliked' : 'Dislike'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div className=\"dashboard\">\n\t\t\t<button onClick={negateAll} className=\"negate-all\">Negar Todos</button>\n\t\t\t<span className=\"counter\">{data.length}/{dups}</span>\n\t\t\t<div className=\"list\">\n\t\t\t\t{data.map((it, index) => (\n\t\t\t\t\t<div key={it.user._id} className=\"item\" data-id={it.user._id}>\n\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t<Image list={it.user.photos} />\n\t\t\t\t\t\t\t<div className=\"info\">\n\t\t\t\t\t\t\t\t<h1>{it.user.name}</h1>\n\t\t\t\t\t\t\t\t<h3>{getDate(it.user.birth_date)}</h3>\n\t\t\t\t\t\t\t\t<span className=\"distance\">{(it.distance_mi * 1.609).toFixed(1).replace('.', ',')} km</span>\n\t\t\t\t\t\t\t\t<p>{it.user.bio}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"actions\">\n\t\t\t\t\t\t\t\t{passButton(it)}\n\t\t\t\t\t\t\t\t{likeButton(it)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Dashboard;\n","import React, { useState } from 'react';\n\nimport './Token.css';\n\nconst Token = () => {\n\tconst [token, setToken] = useState('');\t\n\t\n\tconst onChange = e => setToken(e.target.value);\n\n\tconst onClick = e => {\n\t\te.preventDefault();\n\t\tif (token) {\n\t\t\twindow.localStorage.setItem('tinderToken', token);\n\t\t\twindow.location.reload();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"token-page\">\n\t\t\t<input type=\"text\" name=\"token\" placeholder=\"Token\" onChange={onChange} />\n\t\t\t<button onClick={onClick}>Entrar</button>\n\t\t</div>\n\t);\n};\n\nexport default Token;\n","import React from 'react';\nimport Dashboard from './Dashboard';\nimport Token from './Token';\n\nimport './App.css';\n\nconst App = () => {\n\tconst token = window.localStorage.getItem('tinderToken');\n\treturn !!token ? <Dashboard /> : <Token />;\n};\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
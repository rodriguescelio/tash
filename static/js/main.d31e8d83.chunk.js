(this["webpackJsonptinder-crawler"]=this["webpackJsonptinder-crawler"]||[]).push([[0],{57:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(29),a=n.n(c),s=n(13),i=n(19),o=n(5),u=n.n(o),l=n(4),d=n(7),j=n(6),f=n(11),b=n.n(f),p=b.a.create({baseURL:"http://localhost:6380",transformRequest:[function(e,t){var n=window.localStorage.getItem("tinderToken"),r=window.localStorage.getItem("happnToken"),c=window.localStorage.getItem("happnDeviceId");return n&&(t["tinder-token"]=n),r&&(t["happn-token"]=r),c&&(t["happn-device-id"]=c),e}].concat(Object(l.a)(Array.isArray(b.a.defaults.transformRequest)?b.a.defaults.transformRequest:[b.a.defaults.transformRequest]))}),h=n(9),O=n(8),m=n(16),v=n(15),x=n.n(v),k=(n(57),n(0)),g=function(e){var t=e.item,n=e.likes,c=e.dislikes,a=e.updateLikes,s=e.updateDislikes,i=Object(r.useState)(!1),o=Object(j.a)(i,2),f=o[0],b=o[1],v=Object(r.useState)(""),g=Object(j.a)(v,2),w=g[0],N=g[1],y=Object(r.useState)([]),_=Object(j.a)(y,2),S=_[0],C=_[1];Object(r.useEffect)((function(){var e=[];t.user.photos.length&&(N(t.user.photos[0].url),e.push.apply(e,Object(l.a)(t.user.photos))),t.instagram&&t.instagram.photos&&e.push.apply(e,Object(l.a)(t.instagram.photos.map((function(e){return{url:e.image}})))),C(e)}),[]);var D=function(){return x()().year()-x()(t.user.birth_date).year()},I=function(e){e.preventDefault(),b(!1),document.body.classList.remove("lock")},L=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,p.post("/pass",{id:t.user._id,s:t.s_number});case 4:s(t.user._id);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,p.post("/like",{id:t.user._id,s:t.s_number});case 4:a(t.user._id);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t){t.preventDefault(),N(e)},E=-1!==n.indexOf(t.user._id),F=-1!==c.indexOf(t.user._id);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"profile",onClick:function(e){e.preventDefault(),b(!0),document.body.classList.add("lock")},children:[Object(k.jsx)("img",{alt:"",src:t.user.photos[0].url}),"happn"===t.type&&Object(k.jsx)("span",{className:"happn",children:Object(k.jsx)(O.a,{icon:h.c})}),Object(k.jsxs)("div",{className:"info",children:[Object(k.jsxs)("span",{className:"name",children:[t.user.name,", ",D()]}),Object(k.jsxs)("div",{className:"actions",children:[Object(k.jsx)("button",{className:Object(m.a)("dislike",{hidden:E}),onClick:L,disabled:F,children:Object(k.jsx)(O.a,{icon:h.e})}),Object(k.jsx)("button",{className:Object(m.a)("like",{hidden:F}),onClick:R,disabled:E,children:Object(k.jsx)(O.a,{icon:h.d})})]})]})]}),f&&Object(k.jsxs)("div",{className:"full-profile",children:[Object(k.jsxs)("div",{className:"preview",onClick:function(e){e.target.classList.contains("preview")&&I(e)},children:[Object(k.jsx)("button",{className:"prev",onClick:function(e){e.preventDefault();var t=S.findIndex((function(e){return e.url===w}));N(t>0?S[t-1].url:S[S.length-1].url)},children:Object(k.jsx)(O.a,{icon:h.a})}),Object(k.jsx)("img",{alt:"",src:w}),Object(k.jsx)("button",{className:"next",onClick:function(e){e.preventDefault();var t=S.findIndex((function(e){return e.url===w}));t<S.length-1?N(S[t+1].url):N(S[0].url)},children:Object(k.jsx)(O.a,{icon:h.b})})]}),Object(k.jsxs)("div",{className:"info",children:[Object(k.jsx)("button",{className:"close",onClick:I,children:Object(k.jsx)(O.a,{icon:h.e})}),Object(k.jsxs)("h1",{children:[t.user.name,", ",D()]}),Object(k.jsxs)("span",{className:"distance",children:[(1.6*t.distance_mi).toFixed(1)," km"]}),Object(k.jsx)("p",{children:t.user.bio}),Object(k.jsx)("div",{className:"gallery",children:S.map((function(e,t){return Object(k.jsx)("img",{alt:"",src:e.url,className:Object(m.a)({active:e.url===w}),onClick:T.bind(null,e.url)},t)}))})]})]})]})},w=(n(59),function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(0),s=Object(j.a)(a,2),i=s[0],o=s[1],f=Object(r.useState)([]),b=Object(j.a)(f,2),h=b[0],O=b[1],m=Object(r.useState)([]),v=Object(j.a)(m,2),x=v[0],w=v[1],N=Object(r.useRef)(!1),y=Object(r.useRef)([]),_=Object(r.useRef)(),S=Object(r.useRef)();Object(r.useEffect)((function(){return D(),window.addEventListener("scroll",C,!1),function(){return window.removeEventListener("scroll",C)}}),[]),Object(r.useEffect)((function(){N.current=!1}),[n]);var C=function(e){var t=document.scrollingElement;!N.current&&t.scrollTop>t.scrollHeight-window.innerHeight-250&&D()},D=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.current=!0,t=[],e.prev=2,e.next=5,p.get("/").then((function(e){return e.data}));case 5:n=e.sent,t.push.apply(t,Object(l.a)(n)),r=t.length?t.filter((function(e){var t=-1===y.current.indexOf(e.user._id);return t&&y.current.push(e.user._id),t})):[],o((function(e){return e+(t.length-r.length)})),r.length?c((function(e){return[].concat(Object(l.a)(e),Object(l.a)(r))})):D(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),window.localStorage.removeItem("tinderToken"),window.location.reload();case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=Object(l.a)(n),a=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c((function(e){return e.filter((function(e){return e.user._id!==r[t].user._id}))})),-1!==h.indexOf(r[t].user._id)){e.next=5;break}return e.next=4,p.post("/pass",{id:r[t].user._id,s:r[t].s_number}).then((function(e){return e.data}));case 4:t<r.length-1?a(t+1):D();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.length&&a(0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){O((function(t){return[].concat(Object(l.a)(t),[e])})),_.current.checked&&c((function(t){return t.filter((function(t){return t.user._id!==e}))}))},R=function(e){w((function(t){return[].concat(Object(l.a)(t),[e])})),S.current.checked&&c((function(t){return t.filter((function(t){return t.user._id!==e}))}))};return Object(k.jsxs)("div",{className:"dashboard",children:[Object(k.jsxs)("header",{children:[Object(k.jsx)("button",{onClick:I,className:"negate-all",children:"Negar Todos"}),Object(k.jsxs)("div",{className:"removerLikes",children:[Object(k.jsx)("input",{type:"checkbox",name:"remover-likes",id:"remover-likes",ref:_}),Object(k.jsx)("label",{htmlFor:"remover-likes",children:"Remover ap\xf3s o like"})]}),Object(k.jsxs)("div",{className:"removerDislikes",children:[Object(k.jsx)("input",{type:"checkbox",name:"remover-dislikes",id:"remover-dislikes",ref:S}),Object(k.jsx)("label",{htmlFor:"remover-dislikes",children:"Remover ap\xf3s o dislike"})]}),Object(k.jsxs)("span",{className:"counter",children:[n.length,"/",i]})]}),Object(k.jsx)("div",{className:"list",children:n.map((function(e){return Object(k.jsx)(g,{item:e,likes:h,dislikes:x,updateLikes:L,updateDislikes:R},e.user._id)}))})]})}),N=(n(60),function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(k.jsxs)("div",{className:"token-page",children:[Object(k.jsx)("input",{type:"text",name:"token",placeholder:"Token",onChange:function(e){return c(e.target.value)}}),Object(k.jsx)("button",{onClick:function(e){e.preventDefault(),n&&(window.localStorage.setItem("tinderToken",n),window.location.reload())},children:"Entrar"})]})}),y=(n(61),function(){return Object(r.useEffect)((function(){var e=window.location.search.replace("?","").split("&").reduce((function(e,t){var n=t.split("=");return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},n[0],n[1]))}),{});e.token&&(window.localStorage.setItem("tinderToken",e.token),window.location.href=window.location.origin+window.location.pathname)}),[]),window.localStorage.getItem("tinderToken")?Object(k.jsx)(w,{}):Object(k.jsx)(N,{})}),_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};a.a.render(Object(k.jsx)(y,{}),document.getElementById("root")),_()}},[[62,1,2]]]);
//# sourceMappingURL=main.d31e8d83.chunk.js.map